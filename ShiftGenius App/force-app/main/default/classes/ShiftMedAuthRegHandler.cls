//TODO:This autogenerated class includes the basics for a Registration
//Handler class. You will need to customize it to ensure it meets your needs and
//the data provided by the third party.

global class ShiftMedAuthRegHandler implements Auth.RegistrationHandler{
global boolean canCreateUser(Auth.UserData data) {
    //TODO: Check whether we want to allow creation of a user with this data
    //Set<String> s = new Set<String>{'usernamea', 'usernameb', 'usernamec'};
    //if(s.contains(data.username)) {
        //return true;
    //}
    return false;
}

global User createUser(Id portalId, Auth.UserData data){
    
    string loginUsername = data.identifier;
    System.Debug(loginUsername);
    list<User> userList = [SELECT Id FROM User WHERE shiftmeduserid__c = :loginUsername AND IsActive = TRUE];
    
    //Checks if user exists in Salesforce
    if(!userList.isEmpty()){
        return userList[0];
    }else{
        return null;
    }
                
            
                  
}

global void updateUser(Id userId, Id portalId, Auth.UserData data){

}
}